import XCTest
@testable import Aspen

class AspenTests: AspenTestCase
{
    override func setUp()
    {
        super.setUp()
		super.registerLoggers()
    }

    override func tearDown()
    {
        super.tearDown()
    }

	// MARK: - Verbose mode

    func testVerbosePasses()
    {
		Aspen.setLoggingLevel(.verbose)

		self.expectLog { aspenVerbose(passVerbose) }
		self.expectLog { aspenInfo(passInfo) }
        self.expectLog { aspenWarn(passWarn) }
        self.expectLog { aspenError(passError) }
    }

	// MARK: - Info mode

	func testInfoPasses()
	{
		Aspen.setLoggingLevel(.info)
		self.expectLog { aspenInfo(passInfo) }
		self.expectLog { aspenWarn(passWarn) }
		self.expectLog { aspenError(passError) }
	}

	func testInfoFailures()
	{
		Aspen.setLoggingLevel(.info)
		self.expectNoLog { aspenVerbose(failVerbose) }
	}

	// MARK: - Warn mode

	func testWarnPasses()
	{
		Aspen.setLoggingLevel(.warning)
		self.expectLog { aspenWarn(passWarn) }
		self.expectLog { aspenError(passError) }
	}

	func testWarnFailures()
	{
		Aspen.setLoggingLevel(.warning)
		self.expectNoLog { aspenInfo(failInfo) }
		self.expectNoLog { aspenVerbose(failVerbose) }
	}

	// MARK: - Error mode

	func testErrorPasses()
	{
		Aspen.setLoggingLevel(.error)
		self.expectLog { aspenError(passError) }
	}

	func testErrorFailures()
	{
		Aspen.setLoggingLevel(.error)
		self.expectNoLog { aspenVerbose(failVerbose) }
		self.expectNoLog { aspenInfo(failInfo) }
		self.expectNoLog { aspenWarn(failWarn) }
	}
}

let passVerbose = "Verbose; should pass"
let passInfo = "Info; should pass"
let passWarn = "Warn; should pass"
let passError = "Error; should pass"

let failVerbose = "Verbose; should fail"
let failInfo = "Info; should fail"
let failWarn = "Warn; should fail"
let failError = "Error; should fail"
